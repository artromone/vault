#prog/golang #prog #DEFER 

- Опасность: `defer` внутри цикла накапливает вызовы до конца функции
- **Решение**: Обернуть итерацию в анонимную функцию

```go
for _, file := range files {
    func() {
        f, _ := os.Open(file)
        defer f.Close()  // Закроется при выходе ИЗ ЭТОЙ АНОНИМНОЙ ФУНКЦИИ
        // Работа с файлом...
    }()  // ← Вот эти скобки вызывают функцию сразу
}
```
