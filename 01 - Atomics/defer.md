#prog/golang 

> Откладывает выполнение функции до момента выхода из текущей функции (при `return`, панике или завершении)

```go
func main() {
    defer fmt.Println("World")
    fmt.Println("Hello")
}
// Вывод: Hello → World
```

[[Несколько defer]]

> Аргументы вычисляются на момент объявления `defer` (а не в момент выполнения, когда функция будет вызвана)
> **Переменные на момент инициализации**

```go
x := 1
defer func() { fmt.Println(x) }() // Захватит x = 2
x = 2
// Вывод: 2
```

Если функция возвращает **именованные параметры**, `defer` может их изменить
```go
func sum() (result int) {
    defer func() { result += 10 }()
    return 5 // Вернет 15
}
```

[[defer в циклах]]
[[Обработка паники в горутинах]]