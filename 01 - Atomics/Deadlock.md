#prog #prog/golang  

> Два и более потоков заблокированы, каждый задерживает ресурс и ожидает освобождения другого ресурса. Ни один не может продолжить выполнение

Условия возникновения:
- Ресурсы не разделены
- Ресурс не может быть отобран у процесса, пока сам себя не освободит
- Каждый процесс задерживает и ожидает освобожд ресурса
- Набор процессов в цикле
```go
ch1 := make(chan int)
ch2 := make(chan int)

go func() {
    ch1 <- <-ch2  // Ждём данные из ch2, чтобы отправить в ch1
}()
go func() {
    ch2 <- <-ch1  // Ждём данные из ch1, чтобы отправить в ch2
}()

// Программа зависнет.
```

Методы предотвращения:
- Избежать выполнения одного из необходимых условий
- Алгоритмы для динамич управления ресурсами
- Прерывание одного из процессов или освобождение ресурсов
Решение – select с таймаутом #/todo контекст
```go
select {
case x := <-ch:
    fmt.Println(x)
case <-time.After(1 * time.Second):
    fmt.Println("Timeout!")
}
```