#prog_lang #prog_lang/golang #interview 

в основе мапы – хеш таблица

[[Мапа]]

основные поля
- buckets – структуры, хранят пары ключ-значение. в ведре несколько элементов, чтобы уменьшить число коллизий
- count – всего элементов в map
- loadfactor – параметр для определения, когда увеличить размер map (81)

бакет – массив ключей, значений (8), быстрое определение ключа в бакете
экстра бакет – хранение пар ключ значение, когда основной бакет переполнен. связаны с основным бакетом через указатель. когда коллизия – новые элементы в экстрабакет. при изменении размера map из экстра бакетов могут перейти в обычные

#q
Коллизии – два различных ключа хешируются в один и тот же индекс массива
Коллизии – метод цепочек для хранения нескольих значений в одном ведре
элементы с одинаковым хешем в связном списке 

количество элементов больше определенного порога – массив увеличивает размер
эвакуация – перемещаются постепенно, по нужде, чтобы не было просадок при копировании, когда надо увеличить размер

![[map-1727208847637.jpeg]]

| Операция              | Временная сложность | Примечания                                                                          |
| --------------------- | ------------------- | ----------------------------------------------------------------------------------- |
| Добавление (Insert)   | O(1)                | В среднем, добавление элемента выполняется за константное время.                    |
| Поиск (Lookup)        | O(1)                | В среднем, поиск элемента также выполняется за константное время.                   |
| Удаление (Delete)     | O(1)                | Удаление элемента выполняется за константное время в среднем.                       |
| Перехеширование       | O(N)                | При увеличении размера `map` требуется перераспределение элементов.                 |
| Итерация по элементам | O(N)                | Итерация по всем элементам требует времени, пропорционального количеству элементов. |

Только то, что содержит операцию сравнения
\
Порядок обхода не гарантирован:
- хеш функция, перехеширование (при изменении размера)
- внутри бакетов порядок не определен
- рандомизация – защита от порядка