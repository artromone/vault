#prog #prog/golang #prog/golang/goroutines 

> Механизм связи между горутинами – типизированный канал для передачи данных между горутинами, обеспечивают безопасное выполнение. Помогают избегать [[Состояние гонки (Race Condition)]]

Очевидно, он потокобезопасен, потому что внутри него мьютекс
Канал не самое быстрое средство, но хорош как примитив синхронизации
Есть лок фри подходы #/q

Канал позволяет передавать значения определенного типа ([[Тип элементов канала]])

- [[Небуферизованный (синхронный) канал]]
- [[Буферизованный () канал]]
[[Однонаправленные каналы]]

[[Аксиомы работы с каналами]]

![[Горутины и каналы-1727205744528.jpeg|600]]

[[Емкость канала]]

```go
ch := make(chan int)          // Небуферизированный канал типа chan int
bufCh := make(chan string, 3) // Буферизированный (размер буфера = 3)
```
`ch` – ссылочный тип, созданный через `make`

Операции:
```go
ch <- х   // Отправление
х = <-ch  // Получение данных
<-ch      // Получение, результат не используется
close(ch) // Закрытие канала

select {
	case data := <-ch1:
	    fmt.Println("Данные из ch1:", data)
	case ch2 <- 42:
	    fmt.Println("Данные отправлены в ch2")
	case <-time.After(1 * time.Second):
	    fmt.Println("Таймаут")
}
```
[[Закрытие канала]]

Паттерны:
- [[Worker Pool]]
- [[Остановка горутин через канал done]]