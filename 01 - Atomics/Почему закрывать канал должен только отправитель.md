#prog/golang #prog  #prog/concurrency 

##### **Принцип ответственности**
**Отправитель** знает, когда данные закончились
Если получатель закроет канал, отправитель может попытаться записать в закрытый канал → **паника** ([[Аксиомы работы с каналами]])
```go
ch := make(chan int)
go func() {
	<-ch       // Получатель читает
	close(ch)  // Получатель закрывает канал
}()
ch <- 42       // Паника: запись в закрытый канал
```

##### **Идиоматичный паттерн в Go**
Закрытие канала — сигнал получателям, что данных больше не будет
```go
func producer(ch chan<- int) {
	for i := 0; i < 5; i++ {
		ch <- i
	}
	close(ch)  // Отправитель закрывает канал
}

func consumer(ch <-chan int) {
	for num := range ch {
		fmt.Println(num)
	}
}
```
